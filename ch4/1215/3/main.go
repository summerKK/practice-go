package main

import (
	"regexp"
	"fmt"
	"github.com/bitly/go-simplejson"
	"log"
	"strings"
)

func main() {
	s := `window.__SERVER_VARS__.item = {"section":"fashion","vertical":"fashion","id":"3643261","pk":"v_3643261","storeid":1272,"title":"Hermes Birkin 30cm Gold Camel Tan Togo Gold Hardware Bag A Stamp","num_item":1,"reference":"LU13023643261","dealer_reference":null,"condition":"New or Never Worn","wear":"","refinements":[],"style_of":null,"period_of":null,"period":{"name":"21st Century","title":"Shop more 21st Century and Contemporary Top Handle Bags","urlLabel":"21st-century-and-contemporary","link":"\/fashion\/handbags-purses-bags\/top-handle-bags\/period\/21st-century-and-contemporary\/","data":{"gaaction":"period link in item details","galabel":"21st Century Top Handle Bags"}},"country":{"name":"France"},"manufacturer":"Herm\u00e8s","designer":"Herm\u00e8s","versions":[],"materials_tech":null,"materials":"Leather","medium":[],"description":"Hermes Gold Togo Camel Tan 30cm Birkin Gold Hardware A Stamp<br \/>\nBrand New in Box. Store Fresh. Pristine Condition (with plastic on hardware). <br \/>\nJust purchased from Hermes store; bag bears new 2017 interior A stamp.<br \/>\nPerfect gift! Comes with lock, keys, clochette, sleeper, raincoat, and Hermes box.<br \/>\nGold is a gorgeous camel tan, perhaps the most iconic color of the house.<br \/>\nThe Gold Birkin 30cm embodies Hermes sporty chic like no other, with its white contrast stitching and lush gold hardware.<br \/>\nThe Gold Birkin has been seen on so many celebs and socialites. <br \/>\nIf you get only one Birkin, this is the perfect one to get!<br \/>\nThe ideal 30 size is takes you from day to evening, from jeans to dresses.<br \/>\nMade with low maintenance and scratch-resistant Togo skin. <br \/>\nThis highly coveted statement Birkin is one of the most difficult combinations to get from the Hermes store.<br \/>\nA fabulous investment Birkin that will turn heads everywhere you go!<br \/>\nGold Berloque charm not included.","main_image":{"src":"https:\/\/a.1stdibscdn.com\/archivesE\/upload\/1121189\/v_36432611513079272365\/3643261_master.jpg?width=1500"},"images":[{"small":{"src":"https:\/\/a.1stdibscdn.com\/archivesE\/upload\/1121189\/v_36432611513079272365\/3643261_master.jpg?width=160"},"large":{"src":"https:\/\/a.1stdibscdn.com\/archivesE\/upload\/1121189\/v_36432611513079272365\/3643261_master.jpg?width=768"},"zoom":{"src":"https:\/\/a.1stdibscdn.com\/archivesE\/upload\/1121189\/v_36432611513079272365\/3643261_master.jpg?width=1500"},"count":0},{"small":{"src":"https:\/\/a.1stdibscdn.com\/archivesE\/upload\/v_1302\/v_36432611513015487465\/gold_b30_ghw_on_model_1_master.jpg?width=160"},"large":{"src":"https:\/\/a.1stdibscdn.com\/archivesE\/upload\/v_1302\/v_36432611513015487465\/gold_b30_ghw_on_model_1_master.jpg?width=768"},"zoom":{"src":"https:\/\/a.1stdibscdn.com\/archivesE\/upload\/v_1302\/v_36432611513015487465\/gold_b30_ghw_on_model_1_master.jpg?width=1500"},"count":1},{"small":{"src":"https:\/\/a.1stdibscdn.com\/archivesE\/upload\/v_1302\/v_36432611513015488119\/Gold_Birkin_30_GHW_0047_master.jpg?width=160"},"large":{"src":"https:\/\/a.1stdibscdn.com\/archivesE\/upload\/v_1302\/v_36432611513015488119\/Gold_Birkin_30_GHW_0047_master.jpg?width=768"},"zoom":{"src":"https:\/\/a.1stdibscdn.com\/archivesE\/upload\/v_1302\/v_36432611513015488119\/Gold_Birkin_30_GHW_0047_master.jpg?width=1500"},"count":2},{"small":{"src":"https:\/\/a.1stdibscdn.com\/archivesE\/upload\/v_1302\/v_36432611513015671085\/CHICJOY_2017_03_24_02_0044_master.jpg?width=160"},"large":{"src":"https:\/\/a.1stdibscdn.com\/archivesE\/upload\/v_1302\/v_36432611513015671085\/CHICJOY_2017_03_24_02_0044_master.jpg?width=768"},"zoom":{"src":"https:\/\/a.1stdibscdn.com\/archivesE\/upload\/v_1302\/v_36432611513015671085\/CHICJOY_2017_03_24_02_0044_master.jpg?width=1500"},"count":3},{"small":{"src":"https:\/\/a.1stdibscdn.com\/archivesE\/upload\/v_1302\/v_36432611513015488813\/Gold_Birkin_30_GHW_0046_master.jpg?width=160"},"large":{"src":"https:\/\/a.1stdibscdn.com\/archivesE\/upload\/v_1302\/v_36432611513015488813\/Gold_Birkin_30_GHW_0046_master.jpg?width=768"},"zoom":{"src":"https:\/\/a.1stdibscdn.com\/archivesE\/upload\/v_1302\/v_36432611513015488813\/Gold_Birkin_30_GHW_0046_master.jpg?width=1500"},"count":4},{"small":{"src":"https:\/\/a.1stdibscdn.com\/archivesE\/upload\/v_1302\/v_36432611513015489203\/Gold_Birkin_30_GHW_0050_master.jpg?width=160"},"large":{"src":"https:\/\/a.1stdibscdn.com\/archivesE\/upload\/v_1302\/v_36432611513015489203\/Gold_Birkin_30_GHW_0050_master.jpg?width=768"},"zoom":{"src":"https:\/\/a.1stdibscdn.com\/archivesE\/upload\/v_1302\/v_36432611513015489203\/Gold_Birkin_30_GHW_0050_master.jpg?width=1500"},"count":5},{"small":{"src":"https:\/\/a.1stdibscdn.com\/archivesE\/upload\/v_1302\/v_36432611513015489641\/Gold_Birkin_30_GHW_0049_master.jpg?width=160"},"large":{"src":"https:\/\/a.1stdibscdn.com\/archivesE\/upload\/v_1302\/v_36432611513015489641\/Gold_Birkin_30_GHW_0049_master.jpg?width=768"},"zoom":{"src":"https:\/\/a.1stdibscdn.com\/archivesE\/upload\/v_1302\/v_36432611513015489641\/Gold_Birkin_30_GHW_0049_master.jpg?width=1500"},"count":6},{"small":{"src":"https:\/\/a.1stdibscdn.com\/archivesE\/upload\/v_1302\/v_36432611513015489991\/Gold_Birkin_30_GHW_0051_master.jpg?width=160"},"large":{"src":"https:\/\/a.1stdibscdn.com\/archivesE\/upload\/v_1302\/v_36432611513015489991\/Gold_Birkin_30_GHW_0051_master.jpg?width=768"},"zoom":{"src":"https:\/\/a.1stdibscdn.com\/archivesE\/upload\/v_1302\/v_36432611513015489991\/Gold_Birkin_30_GHW_0051_master.jpg?width=1500"},"count":7},{"small":{"src":"https:\/\/a.1stdibscdn.com\/archivesE\/upload\/v_1302\/v_36432611513015490428\/Gold_Birkin_30_GHW_0141_master.jpg?width=160"},"large":{"src":"https:\/\/a.1stdibscdn.com\/archivesE\/upload\/v_1302\/v_36432611513015490428\/Gold_Birkin_30_GHW_0141_master.jpg?width=768"},"zoom":{"src":"https:\/\/a.1stdibscdn.com\/archivesE\/upload\/v_1302\/v_36432611513015490428\/Gold_Birkin_30_GHW_0141_master.jpg?width=1500"},"count":8},{"small":{"src":"https:\/\/a.1stdibscdn.com\/archivesE\/upload\/v_1302\/v_36432611513015491669\/Gold_Birkin_30_GHW_0133_master.jpg?width=160"},"large":{"src":"https:\/\/a.1stdibscdn.com\/archivesE\/upload\/v_1302\/v_36432611513015491669\/Gold_Birkin_30_GHW_0133_master.jpg?width=768"},"zoom":{"src":"https:\/\/a.1stdibscdn.com\/archivesE\/upload\/v_1302\/v_36432611513015491669\/Gold_Birkin_30_GHW_0133_master.jpg?width=1500"},"count":9}],"hide_price":false,"price":21450,"price_usd":21450,"lead_time":{"name":null},"production_type":{"name":null},"creation_date":null,"customizationNote":"","shortened_uri":"1stdibs.com\/fashion\/id-v_3643261\/","category_uri":"\/fashion\/handbags-purses-bags\/top-handle-bags\/","measurements":{"weight":null,"width":"11.75 in. (30 cm)","height":"9.5 in. (24 cm)","second_height":null,"diameter":null,"depth":"6 in. (15 cm)","length":null,"marked_size":null,"bust":null,"waist":null,"hip":null,"shoulder_hem":null,"inseam":null},"ga":{"vpvData":["vpv","pdp","fashion","handbags-purses-bags","top-handle-bags","hermes-birkin-30cm-gold-camel-tan-togo-gold-hardware-bag-stamp","id-v_3643261"],"custom_vars":[{"slot":4,"name":"PDP-Available-Price","value":"|pur=y|neg=n|ship=n|ret=n|pr=21450|twl=y|sale=n|pd=12-13-2017|sd=none|id=v_3643261|dd=v_1302","check_login":true,"scope":3},{"slot":5,"name":"Chicjoy - v_1302","value":"pdp-available-price","scope":3}]},"creators":{"crea":{"label":"Creator","creator_name":[{"name":"Herm\u00e8s","link":"\/creators\/hermes\/fashion\/"},{"name":"Herm\u00e8s","link":"\/creators\/hermes\/fashion\/"}]},"attr":{"label":"Attributed to","creator_name":[]},"style":{"label":"In the Style of","creator_name":[]},"raw":["Herm\u00e8s","Herm\u00e8s"]},"dealer":{"id":"1302","pk":"v_1302","since_year":"2015","logo":"https:\/\/a.1stdibscdn.com\/v_1302\/DEALER_PDP_LOGO\/1485903070_nnon4\/v_1302_pdp.png","company":"Chicjoy","address":"BVI","address2":"228 Park Avenue South #75030","city":"New York","state":"NY","zip":"10003","country":"US","telephone":"(646) 846-1920","association":null,"capsule":0,"url_label":"chicjoy","maker":null,"preferences":{"allowPriceReduce":"N","showSold":null,"showOnHold":null,"storefrontUrl":"chicjoy","urlLabel":"chicjoy","url":"http:\/\/chicjoy.com\/","label":"ChicJoy","currency":"USD","displayDibsSold":"Y","displayStoreFrontSold":"Y","displayDibsHold":"Y","displayStoreFrontHold":"Y","scrollLogo":"https:\/\/a.1stdibscdn.com\/dealer_images\/1302\/v_1302_pdp.png","scrollLogoLg":"https:\/\/a.1stdibscdn.com\/v_1302\/DEALER_PDP_LOGO\/1485903070_nnon4\/v_1302_pdp.png","scrollLogoActive":"Y","scrollLogoLgActive":"Y","capsule":"N","view1active":null,"showUrl":"Y","hasShopTalk":"Y","hasOther":"N","apiType":"sellerPreferences","storeFrontPriority":0,"view1":"https:\/\/a.1stdibscdn.com\/dealer_images\/v_1302\/LEGACY_DEALER_STOREFRONT_BANNER\/1485903076_o1440\/chicjoy1.jpg","mailLogo":"https:\/\/a.1stdibscdn.com\/dealer_images\/1302\/v_1302_memo.png","mailLogoActive":"Y","shopTalkLabel":"","shopTalkUrl":"","otherLabel":"","otherUrl":"","measurementUnit":"IN","autoRequestShipmentQuote":"N","displayStoreAddress":"N","storeAddressByAppointmentOnly":"Y","smsOptin":"N"},"uri":"\/dealers\/chicjoy\/"}};`

	//reg := regexp.MustCompile(`window\.__SERVER_VARS__\.item\s*=.+"images":\[([^\]]+)\]`)
	reg := regexp.MustCompile(`window\.__SERVER_VARS__\.item\s*=\s*([^\n]+)`)

	res := reg.FindStringSubmatch(s)

	r := res[1]

	r = strings.TrimRight(res[1], ";")

	img, err := simplejson.NewJson([]byte(r))
	if err != nil {
		log.Fatal(err)
	}

	imgPath, err := img.Get("images").Array()

	if err != nil {
		log.Fatal(err)
	}

	var imgP []string
	for i := range imgPath {
		s, _ := img.Get("images").GetIndex(i).GetPath("large", "src").String()
		imgP = append(imgP, s)
	}

	fmt.Println(imgP)

	fmt.Println(img.GetPath("creators","crea","creator_name").GetIndex(0).Get("name").String())

}
